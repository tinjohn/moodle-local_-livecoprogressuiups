define("local_livecoprogressuiups/local/listener/cm_h5p_scored_listener",["exports"],(function(_exports){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0;
/**
   * Dynamic Progressbar and more - JS code cm_h5p_scored_listener
   *
   * @module     local_livecoprogressuiups/cm_h5p_scored_listener
   * @copyright  2023 Tina John <tina.john@th-luebeck.de>
   * @copyright  Institut fuer interaktive Systeme der TH LÃ¼beck
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */
let registered=!1;_exports.init=()=>{if(registered)return;registered=!0;const handleXAPIEvent=function(event){if(event&&event.data&&event.data.statement&&event.data.statement.result&&event.data.statement.result.score&&event.data.statement.result.score.scaled){const theiframe=this.frameElement;var cmcompletedEvent=new CustomEvent("cmcompleted",{detail:{completionType:"H5Pscored",framedin:theiframe,message:"a course module completed or scored"}});document.dispatchEvent(cmcompletedEvent)}};window.addEventListener("message",(function(e){e.data&&e.data.context&&"h5p"==e.data.context&&"hello"==e.data.action&&function(){if(window.document.h5player&&window.document.h5player.H5P&&window.document.h5player.H5P.externalDispatcher){window.document.h5player.H5P.externalDispatcher;window.document.h5player.H5P.externalDispatcher.off("xAPI"),window.document.h5player.H5P.externalDispatcher.on("xAPI",handleXAPIEvent.bind(window.document.h5player))}else for(var i=0;i<window.length;i++){var currentWindow=window[i];currentWindow.H5P.externalDispatcher&&(currentWindow.H5P.externalDispatcher.off("xAPI"),currentWindow.H5P.externalDispatcher.on("xAPI",handleXAPIEvent.bind(currentWindow)))}}()}))}}));

//# sourceMappingURL=cm_h5p_scored_listener.min.js.map